const orangeTopA = 'M78.484 66.1765C78.3013 74.0325 81.3853 81.2005 86.488 86.3952L53.6533 123.833C41.9013 114.037 24.496 113.562 12.1466 123.549C-1.90537 134.914 -4.08404 155.519 7.28129 169.571C18.6466 183.625 39.252 185.803 53.304 174.438C67.3573 163.073 69.536 142.467 58.1706 128.415C57.996 128.199 57.812 127.994 57.6333 127.783L67.796 115.978L67.7706 115.955L90.62 89.8619C94.9373 92.8272 100.133 94.6192 105.761 94.7499C117.752 95.0272 128.151 87.7045 132.353 77.1859L147.987 82.4112L147.995 82.3885L170.845 90.2405C170.072 93.8059 170.28 97.6259 171.679 101.287C175.515 111.323 186.759 116.349 196.793 112.514C206.829 108.679 211.856 97.4352 208.021 87.3992C205.803 81.5952 201.101 77.4832 195.595 75.7752L196.489 62.9712L196.467 62.9699L198.356 38.8819C202 38.7392 205.648 37.5832 208.843 35.3125C217.6 29.0899 219.655 16.9459 213.432 8.18719C207.209 -0.57014 195.067 -2.62613 186.308 3.59654C177.551 9.8192 175.496 21.9645 181.719 30.7219C184.888 35.1819 189.595 37.8939 194.607 38.6685L191.728 74.9992C188.825 74.7139 185.817 75.0605 182.907 76.1725C177.795 78.1259 173.993 82.0059 171.989 86.6645L133.551 73.4219C134.013 71.5085 134.287 69.5192 134.335 67.4712C134.692 52.0485 122.479 39.2565 107.056 38.8992C91.6346 38.5419 78.8413 50.7539 78.484 66.1765Z';
const orangeTopB = 'M78.484 46.1765C78.3013 54.0325 81.3853 61.2005 86.488 66.3952L53.6533 103.833C41.9013 94.0365 24.496 93.5619 12.1466 103.549C-1.90537 114.914 -4.08404 135.519 7.28129 149.571C18.6466 163.625 39.252 165.803 53.304 154.438C67.3573 143.073 69.536 122.467 58.1706 108.415C57.996 108.199 57.812 107.994 57.6333 107.783L67.796 95.9779L67.7706 95.9552L90.62 69.8619C94.9373 72.8272 100.133 74.6192 105.761 74.7499C117.752 75.0272 128.151 67.7045 132.353 57.1859L147.987 65.41L147.995 65.39L170.845 80.24C170.072 83.8053 170.28 87.6287 171.679 91.29C175.515 101.326 186.759 106.345 196.793 102.51C206.829 98.6753 211.856 87.436 208.021 77.4C205.803 71.596 201.101 67.488 195.595 65.78L196.489 42.9712L196.467 42.9699L198.356 38.88C202 38.7373 205.648 37.5807 208.843 35.31C217.6 29.0873 219.655 16.9487 213.432 8.18999C207.209 -0.567342 195.067 -2.62267 186.308 3.59999C177.551 9.82266 175.496 21.9627 181.719 30.72C184.888 35.18 189.595 37.8953 194.607 38.67L191.728 65C188.825 64.7147 185.817 65.058 182.907 66.17C177.795 68.1233 173.993 72.0013 171.989 76.66L133.551 53.4219C134.013 51.5085 134.287 49.5192 134.335 47.4712C134.692 32.0485 122.479 19.2565 107.056 18.8992C91.6346 18.5419 78.8413 30.7539 78.484 46.1765Z';
const orangeBottomA = 'M131.435 139.225C121.392 135.595 110.823 136.474 101.924 140.806L67.8667 82.3219C85.568 71.4112 93.6974 49.1873 86.1627 28.9606C77.588 5.94459 51.9787 -5.76474 28.9614 2.80992C5.94402 11.3846 -5.76396 36.9953 2.80938 60.0126C11.384 83.0299 36.9947 94.7379 60.012 86.1633C60.3653 86.0313 60.7094 85.8832 61.0574 85.7432L71.8801 103.939L71.9187 103.917L95.6734 144.631C89.9867 148.914 85.4334 154.835 82.8347 162.03C77.296 177.362 82.24 193.922 93.9787 203.882L80.4921 221.771L80.5174 221.791L60.528 247.843C56.2693 245.307 51.2573 243.923 45.9347 244.145C31.3467 244.753 20.0134 257.07 20.62 271.658C21.2254 286.247 33.5441 297.581 48.1307 296.975C56.5694 296.623 63.8987 292.342 68.4773 285.983L84.5893 292.667L84.6014 292.639L114.825 305.477C113.435 310.237 113.349 315.434 114.895 320.533C119.129 334.506 133.891 342.401 147.863 338.165C161.837 333.929 169.731 319.169 165.496 305.197C161.26 291.223 146.5 283.329 132.527 287.565C125.409 289.721 119.884 294.615 116.72 300.739L71.1481 281.337C72.7694 277.718 73.624 273.693 73.448 269.462C73.1374 262.031 69.7814 255.457 64.6427 250.863L98.3121 207.051C100.577 208.475 103.021 209.686 105.64 210.631C125.359 217.754 147.119 207.543 154.24 187.825C161.364 168.106 151.153 146.347 131.435 139.225Z';
const orangeBottomB = 'M131.435 119.225C121.392 115.596 110.823 116.475 101.924 120.807L67.8667 82.32C85.568 71.4093 93.6974 49.1867 86.1627 28.96C77.588 5.94401 51.9787 -5.76466 28.9614 2.81001C5.94402 11.3847 -5.76396 36.9927 2.80938 60.01C11.384 83.0274 36.9947 94.7347 60.012 86.16C60.3653 86.028 60.7094 85.88 61.0574 85.74L69.1304 93.81L76.6304 102.31L95.6734 124.632C89.9867 128.915 85.4334 134.836 82.8347 142.031C77.296 157.363 82.24 173.923 93.9787 183.883L80.4921 201.772L80.5174 201.792L60.528 227.844C56.2693 225.308 51.2573 223.924 45.9347 224.145C31.3467 224.753 20.0134 237.071 20.62 251.659C21.2254 266.248 33.5441 277.581 48.1307 276.976C56.5694 276.624 63.8987 272.343 68.4773 265.984L84.5893 272.668L84.6014 272.64L114.825 285.477C113.435 290.237 113.349 295.435 114.895 300.533C119.129 314.507 133.891 322.401 147.863 318.165C161.837 313.929 169.731 299.169 165.496 285.197C161.26 271.224 146.5 263.329 132.527 267.565C125.409 269.721 119.884 274.616 116.72 280.74L71.1481 261.337C72.7694 257.719 73.624 253.693 73.448 249.463C73.1374 242.032 69.7814 235.457 64.6427 230.864L98.3121 187.052C100.577 188.476 103.021 189.687 105.64 190.632C125.359 197.755 147.119 187.544 154.24 167.825C161.364 148.107 151.153 126.348 131.435 119.225Z';
anime.timeline({
    duration: 3000,
    easing: 'linear',
    loop: true
}).add({
    targets: '.particles_blue',
    scale:[
        {value: .95},
        {value: .85},
        {value: .8},
        {value: 1}
    ],
}).add({
    targets: '.particles_orange__top',
    d: [
        {value: orangeTopB},
        {value: orangeTopA}
    ]
},1000).add({
    targets: '.particles_orange__bottom',
    d: [
        {value: orangeBottomB},
        {value: orangeBottomA}
    ]
},2000)

function countOrigins(el){
    const origin = el.getBBox();
    const originX = origin.x + origin.width/2;
    const originY = origin.y + origin.height/2;
    return `transform-origin: ${originX}px ${originY}px`
}
function loaded(){
    const bg = document.querySelector('#bg');
    const virus = bg.contentDocument.querySelector('#virus');
    virus.setAttribute('style', countOrigins(virus));
    // const virusOrigin = virus.getBBox();
    // const virusOriginX = virusOrigin.x + virusOrigin.width/2;
    // const virusOriginY = virusOrigin.y + virusOrigin.height/2;
    // const virusPaths = [...virus.children];
    // virusPaths.map(path=>path.setAttribute('style', `transform-origin: ${virusOriginX}px ${virusOriginY}px`))
    const bubbles = [...bg.contentDocument.querySelector('#bubbles').children];
    const bubbles2 = [...bg.contentDocument.querySelector('#bubbles2').children];
    const bubbles3 = [...bg.contentDocument.querySelector('#bubbles3').children];
    bubbles3.map(path=>path.setAttribute('style',countOrigins(path)));
    anime({
        targets: virus,
        rotate: '1turn',
        duration: 10000,
        loop: true
    })
    anime({
        targets: bubbles,
        delay: anime.stagger(500),
        translateY: function(){return anime.random(0, -100);},
        translateX: function(){return anime.random(0, 20);},
        opacity:0,
        easing: "easeInOutSine"
    })
    anime({
        targets: bubbles2,
        delay: anime.stagger(150),
        translateY: function(){return anime.random(-150, -200);},
        translateX: function(){return anime.random(-5, 5);},
        duration: 1500,
        opacity: 0,
        easing: "easeInOutSine",
        loop: true
    })
    anime({
        targets: bubbles3,
        delay: anime.stagger(400),
        translateY: function(){return anime.random(-200, -250);},
        duration: 4000,
        scale: 0,
        easing: "easeInOutSine",
        loop: true
    })
}